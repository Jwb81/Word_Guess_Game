<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Word Guess Game</title>
</head>
<body>
    <h3>Press any key to get started!</h4>

    <h4>Current Word:</h4>
    <p id="currentWord"></p>
    <p>Wins: <span id="wins"></span></p>
    <p>Losses: <span id="losses"></span></p>
    <p>Letters: <span id="lettersGuessed"></span></p>

<script>
    var wordList = [
        'hello', 'goodbye'
    ];

    var game = {
        word : "",
        wins : 0,
        losses : 0,
        guessesLeft : 0,
        lettersGuessed : [],

        newGame : function () {
            this.guessesLeft = 9;
            this.lettersGuessed = [];
            this.word = wordList[0];

            var wordString = '';
            for (var i = 0; i < this.word.length; i++) {
                wordString += ' _';
            }
            document.getElementById('currentWord').innerText = wordString;

        },

        checkGuess : function (letter) {
            for (var i = 0; i < this.lettersGuessed.length; i++) {
                if (this.lettersGuessed[i] === letter.toLowerCase())
                    return;
            }

            this.lettersGuessed.push(letter.toLowerCase());
            this.guessesLeft--;

            if (this.guessesLeft == 0) {
                this.losses++;
                document.getElementById('losses').innerText = this.losses;
            }

            // final step is to display the letters used
            this.displayLetters();
        },

        displayLetters : function () {
            var wordString = "";
            var correctCounter = 0;
            var letterFound = false;
            
            for (var i = 0; i < this.word.length; i++) {
                letterFound = false;

                for (var j = 0; j < this.lettersGuessed.length; j++) {
                    // console.log(this.word[i] + '  '  + this.lettersGuessed[j]);
                    if (this.word[i] == this.lettersGuessed[j]) {
                        // show this letter
                        wordString += ' ' + this.word[i].toUpperCase();
                        correctCounter++;
                        letterFound = true;
                    }
                }
                if (letterFound == false) {
                        wordString += ' _';
                }

                // reset the boolean for the next iteration
                letterFound = false;


            }

            if (correctCounter == this.word.length) { // the user won the game
                this.wins++;
                document.getElementById('wins').innerText = this.wins;
                this.newGame();
            }
            else {
                document.getElementById('currentWord').innerText = wordString;
            }

            // console.log(wordString);
        }
    }


    document.onkeyup = function (evt) {
        var keyPressed = evt.key;

        game.checkGuess(keyPressed);
    }

    // start the game
    game.newGame();

</script>
</body>
</html>